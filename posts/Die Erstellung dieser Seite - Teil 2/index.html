<!DOCTYPE html><html lang="de"><head><meta charset="UTF-8"/><meta name="og:site_name" content="OddMagnet.dev"/><link rel="canonical" href="https://oddmagnet.dev/posts/Die%20Erstellung%20dieser%20Seite%20-%20Teil%202"/><meta name="twitter:url" content="https://oddmagnet.dev/posts/Die%20Erstellung%20dieser%20Seite%20-%20Teil%202"/><meta name="og:url" content="https://oddmagnet.dev/posts/Die%20Erstellung%20dieser%20Seite%20-%20Teil%202"/><title>Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 2 | OddMagnet.dev</title><meta name="twitter:title" content="Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 2 | OddMagnet.dev"/><meta name="og:title" content="Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 2 | OddMagnet.dev"/><meta name="description" content="Wie diese Seite erstellt wurde, Teil 2."/><meta name="twitter:description" content="Wie diese Seite erstellt wurde, Teil 2."/><meta name="og:description" content="Wie diese Seite erstellt wurde, Teil 2."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to OddMagnet.dev"/></head><body class="item-page"><header><div class="wrapper"><h1><a href="/" class="site-name">OddMagnet.dev</a></h1><span class="description">Eine deutschsprachige Webseite rund um die Programmiersprache Swift</span><nav><ul class="menu"><li class="selected"><a href="/posts">Beiträge</a></li><li><a href="/projects">Projekte</a></li><li><a href="/aboutme">Aboutme</a></li><li><a href="/cv">Lebenslauf</a></li></ul></nav><nav><ul class="share"><li><a href="https://twitter.com/OddMagnetDev" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg></a></li><li><a href="https://github.com/OddMagnet" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></li><li><a href="https://www.linkedin.com/in/OddMagnet/" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a></li><li><a href="mailto:mibruenen@gmail.com" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330.001 330.001" style="enable-background:new 0 0 330.001 330.001"><path id="XMLID_350_" d="M173.871,177.097c-2.641,1.936-5.756,2.903-8.87,2.903c-3.116,0-6.23-0.967-8.871-2.903L30,84.602 L0.001,62.603L0,275.001c0.001,8.284,6.716,15,15,15L315.001,290c8.285,0,15-6.716,15-14.999V62.602l-30.001,22L173.871,177.097z"></path><polygon id="XMLID_351_" points="165.001,146.4 310.087,40.001 19.911,40     "></polygon></svg></a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 2</h1><p>In diesem Teil geht es um die Installation und Konfiguration des Splash Plugins für Publish, dieses findet man (unter anderem) hier: <a href="https://github.com/topics/publish-plugin?l=swift">Publish Community Plugins</a>. Wer selber ein Plugin für Publish entwickeln möchte sollte auf jeden Fall das <code>publish-plugin</code> topic zu dem Repository hinzufügen (siehe <a href="https://help.github.com/en/github/administering-a-repository/classifying-your-repository-with-topics#adding-topics-to-your-repository">hier</a>), dadurch ist das Plugin direkt bei den anderen Community Plugins aufzufinden. Wie in Teil 1 erwähnt wird diese Reihe von Posts eher auf einem Anfänger-Niveau sein.</p><h2>Installation am Beispiel von Splash</h2><p>Um ein Plugin zu nutzen muss man es zuerst zu den Dependencies in der <code>Package.swift</code> Datei hinzufügen, diese sieht direkt nach der Nutzung von <code>publish new</code> erstmal so aus:</p><pre><code><span class="keyword">let</span> package = <span class="type">Package</span>(
    name: <span class="string">"OddmagnetDev"</span>,
    products: [
        .<span class="call">executable</span>(
            name: <span class="string">"OddmagnetDev"</span>,
            targets: [<span class="string">"OddmagnetDev"</span>]
        )
    ],
    dependencies: [
        .<span class="call">package</span>(name: <span class="string">"Publish"</span>, url: <span class="string">"https://github.com/johnsundell/publish.git"</span>, from: <span class="string">"0.7.0"</span>)
    ],
    targets: [
        .<span class="call">target</span>(
            name: <span class="string">"OddmagnetDev"</span>,
            dependencies: [<span class="string">"Publish"</span>]
        )
    ]
)
</code></pre><p>Am Beispiel des <a href="https://github.com/JohnSundell/SplashPublishPlugin">Splash Plugins</a> sähe das dann so aus:</p><pre><code><span class="keyword">let</span> package = <span class="type">Package</span>(
    <span class="comment">/* Code ausgelassen */</span> 
    dependencies: [
        .<span class="call">package</span>(name: <span class="string">"Publish"</span>, url: <span class="string">"https://github.com/johnsundell/publish.git"</span>, from: <span class="string">"0.7.0"</span>),
        .<span class="call">package</span>(name: <span class="string">"SplashPublishPlugin"</span>, url: <span class="string">"https://github.com/johnsundell/splashpublishplugin"</span>, from: <span class="string">"0.1.0"</span>)
    ],
    targets: [
        .<span class="call">target</span>(
            name: <span class="string">"OddmagnetDev"</span>,
            dependencies: [
                <span class="string">"Publish"</span>,
                <span class="string">"SplashPublishPlugin"</span>
            ]
        )
    ]
)
</code></pre><p>Das allein reicht natürlich nicht aus, damit das Plugin auch was macht muss es in der publishing pipeline genutzt werden, in der <code>main.swift</code>:</p><pre><code><span class="comment">/* Vorherige imports ausgelassen */</span>
<span class="keyword">import</span> SplashPublishPlugin

<span class="keyword">struct</span> OddmagnetDev: <span class="type">Website</span> { <span class="comment">/*...*/</span> }

<span class="keyword">try</span> <span class="type">OddmagnetDev</span>().<span class="call">publish</span>(using: [
    .<span class="call">installPlugin</span>(.<span class="call">splash</span>(withClassPrefix: <span class="string">""</span>)),
  	<span class="comment">/* alle weiteren Schritte */</span>
])
</code></pre><h2>CSS Datei für Splash hinzufügen</h2><p>Im Falle von Splash wird auch noch eine <code>styles.css</code> Datei benötigt, für einen guten Startpunk empfehle ich die <a href="https://github.com/JohnSundell/Splash/blob/master/Examples/sundellsColors.css">Beispiel CSS Datei</a> von John Sundell.</p><p>Diese kann man leider nicht ohne weiteres nutzen, solange man die <code>Foundation</code> Theme verwendet. Idealerweise erstellt man sich seine eigene Theme in der die CSS Datei dann genutzt wird.</p><p>Da ich in einem späteren Beitrag über die Erstellung einer eigenen Theme gehen will zeige ich in diesem Artikel nur einen "Workaround" wie man die CSS Datei für das Syntax Highlighting auch mit dem <code>Foundation</code> Theme "nutzen" kann.</p><p>Zuerst erstellt man einen neuen Ordner für die "eigene" Theme <code>Resources &gt; ThemeName</code>, in diesem kommt dann die CSS Datei für das Publish plugin, ich habe sie einfach <code>splash.css</code> genannt. Zusätzlich erstellt man auch noch eine CSS Datei für die eigentliche Theme, <code>styles.css</code>, in diese kopiert man dann den Inhalt der von <code>Publish &gt; Resources &gt; FoundationTheme &gt; styles.css</code>.</p><p>Als nächstes erstellt man einen Ordner für den Code der "eigenen" Theme <code>Sources &gt; ProjektName &gt; ThemeName</code>, sowie eine <code>Theme+ThemeName.swift</code> Datei. Dort kopiert man den Inhalt von <code>Publish &gt; Sources &gt; Publish &gt; API &gt; Theme+Foundation.swift</code> rein.</p><p>Nun muss man diese Datei noch ein wenig anpassen, zum einen wird ein <code>import Publish</code> benötigt, zum anderen sollte man den Namen für die Theme ändern, sowie die Pfade für die CSS Dateien anpassen, das sollte dann so aussehen:</p><pre><code><span class="keyword">import</span> Plot
<span class="keyword">import</span> Publish

<span class="keyword">public extension</span> <span class="type">Theme</span> {
    <span class="keyword">static var</span> themeName: <span class="type">Self</span> { <span class="comment">// hier den Namen der Variable ändern</span>
        <span class="type">Theme</span>(
            htmlFactory: <span class="type">ThemeNameHTMLFactory</span>(),	<span class="comment">// den Factory Namen auch entsprechend anpassen</span>
            resourcePaths: [	<span class="comment">// und die Pfade für die CSS Dateien anpassen</span>
                <span class="string">"Resources/ThemeName/styles.css"</span>,
                <span class="string">"Resources/ThemeName/splash.css"</span>
                ]
        )
    }
}

<span class="comment">// Die Factory selber muss natürlich auch umbenannt werden</span>
<span class="keyword">private struct</span> ThemeNameHTMLFactory&lt;Site: <span class="type">Website</span>&gt;: <span class="type">HTMLFactory</span> { <span class="comment">/*…*/</span> }
</code></pre><p>Zuletzt muss man die <code>makeItemHTML</code> Funktion in der <code>ThemeNameHTMLFactory</code> anpassen, damit diese auch die CSS Dateien verlinkt. Das sollte dann so aussehen:</p><pre><code><span class="keyword">func</span> makeItemHTML(for item: <span class="type">Item</span>&lt;<span class="type">Site</span>&gt;,
                  context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span> {
  <span class="type">HTML</span>(
    .<span class="call">lang</span>(context.<span class="property">site</span>.<span class="property">language</span>),
    .<span class="call">head</span>(
      for: item,
      on: context.<span class="property">site</span>,
      stylesheetPaths: [
        <span class="string">"/styles.css"</span>,
        <span class="string">"/splash.css"</span>
      ]
    ),
    <span class="comment">/* Code ausgelassen */</span>
  )
}
</code></pre><p>Sollte ihr die CSS Datei für das Splash Plugin anders genannt haben müsst ihr das natürlich auch anpassen.</p><p>Wenn man die Seite nun neu generiert (<code>⌘ + R</code>) sieht man: nichts. Denn bisher nutzt die Publishing Pipeline immer noch die Foundation Theme. In der <code>main.swift</code> muss man noch das <code>withTheme: .foundation</code> ändern:</p><pre><code><span class="keyword">try</span> <span class="type">OddmagnetDev</span>().<span class="call">publish</span>(using: [
    .<span class="call">installPlugin</span>(.<span class="call">splash</span>(withClassPrefix: <span class="string">""</span>)),
  	<span class="comment">/* Schritte ausgelassen */</span> 
    .<span class="call">generateHTML</span>(withTheme: .<span class="dotAccess">themeName</span>),
  	<span class="comment">/* Schritte ausgelasse */</span>
])
</code></pre><p>Noch ein letztes Mal die Seite neu generieren und die Code-Blöcke sollten nun schön markiert sein.</p><p>In dem nächsten Artikel geht es dann darum, wie man sich eine eigene Theme erstellt.</p></div><div class="content-info"><span>Zuletzt bearbeitet: 8. Feb 2022, 16:26</span><span>Markiert mit: <ul class="tag-list"><li class="blog"><a href="/tags/blog">Blog</a></li><li class="publish"><a href="/tags/publish">Publish</a></li><li class="swift"><a href="/tags/swift">Swift</a></li></ul></span></div></article></div><footer><p>In Swift mit <a href="https://github.com/johnsundell/publish">Publish</a> erstellt</p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>