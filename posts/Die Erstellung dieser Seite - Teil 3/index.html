<!DOCTYPE html><html lang="de"><head><meta charset="UTF-8"/><meta name="og:site_name" content="OddMagnet.dev"/><link rel="canonical" href="https://oddmagnet.dev/posts/Die%20Erstellung%20dieser%20Seite%20-%20Teil%203"/><meta name="twitter:url" content="https://oddmagnet.dev/posts/Die%20Erstellung%20dieser%20Seite%20-%20Teil%203"/><meta name="og:url" content="https://oddmagnet.dev/posts/Die%20Erstellung%20dieser%20Seite%20-%20Teil%203"/><title>Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 3 | OddMagnet.dev</title><meta name="twitter:title" content="Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 3 | OddMagnet.dev"/><meta name="og:title" content="Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 3 | OddMagnet.dev"/><meta name="description" content="Wie diese Seite erstellt wurde, Teil 3."/><meta name="twitter:description" content="Wie diese Seite erstellt wurde, Teil 3."/><meta name="og:description" content="Wie diese Seite erstellt wurde, Teil 3."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to OddMagnet.dev"/></head><body class="item-page"><header><div class="wrapper"><h1><a href="/" class="site-name">OddMagnet.dev</a></h1><span class="description">Eine deutschsprachige Webseite rund um die Programmiersprache Swift</span><nav><ul class="menu"><li class="selected"><a href="/posts">Beiträge</a></li><li><a href="/projects">Projekte</a></li><li><a href="/aboutme">Aboutme</a></li><li><a href="/cv">Lebenslauf</a></li></ul></nav><nav><ul class="share"><li><a href="https://twitter.com/OddMagnetDev" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg></a></li><li><a href="https://github.com/OddMagnet" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></li><li><a href="https://www.linkedin.com/in/OddMagnet/" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a></li><li><a href="mailto:mibruenen@gmail.com" class="contact-svg"><svg class="svg-fill-color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330.001 330.001" style="enable-background:new 0 0 330.001 330.001"><path id="XMLID_350_" d="M173.871,177.097c-2.641,1.936-5.756,2.903-8.87,2.903c-3.116,0-6.23-0.967-8.871-2.903L30,84.602 L0.001,62.603L0,275.001c0.001,8.284,6.716,15,15,15L315.001,290c8.285,0,15-6.716,15-14.999V62.602l-30.001,22L173.871,177.097z"></path><polygon id="XMLID_351_" points="165.001,146.4 310.087,40.001 19.911,40     "></polygon></svg></a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Eine deutsche Webseite über Swift, erstellt mit Swift - Teil 3</h1><p>Wie im letzten Teil schon erwähnt dreht sich dieser Teil hauptsächlich um das hinzufügen eines eigenen Themes. Ansonsten wir üblich die Anmerkung dass diese Reihe von Posts eher auf einem Anfänger-Niveau sein wird / soll.</p><p>Was ich ursprünglich vermeiden wollte war es meine Theme selber zu erstellen, da ich von Design wenig Ahnung habe. Mit jeder zusätzlichen Zeile CSS erhöht sich die Wahrscheinlichkeit dass meine Website nachher einfach grausam aussieht.</p><p>Wie man das als Entwickler dann halt so macht googlet man erstmal nach vorhandenen Lösungen für das eigene Problem. Wirklich viel finden wird man allerdings nicht. Publish ist vergleichsweise relativ unbekannt. Die Blogs deren Code man auf Github einsehen kann haben alle kaum Änderungen in der Theme und von denen, die sich wirklich abheben, kann man den Code nicht einsehen.</p><p>Bleibt also nur übrig, doch eine eigene Theme zu erstellen.</p><h2>Die Basics</h2><p>Um eine eigene Theme für Publish zu erstellen benötigt man einige Sachen:</p><ul><li>Ein Protokoll für die eigene Theme, wenn man extra Funktionen einbauen will</li><li>Eine HTMLFactory, die das HTML für die Seite erzeugt</li><li>Eine Extension auf Theme, in der man dann in einer statische Variable seine Theme inklusive HTMLFactory bereit stellt.</li></ul><p>Für diesen Post werde ich das ganze von hinten auflösen, die Extension selber ist das einfachste und benötigt nur einige wenige Zeilen:</p><h3>Extension auf Theme</h3><pre><code><span class="keyword">public extension</span> <span class="type">Theme</span> <span class="keyword">where</span> <span class="type">Site</span>: <span class="type">OddWebsite</span> {	<span class="comment">// 1</span>
  <span class="keyword">static var</span> oddTheme: <span class="type">Self</span> {										<span class="comment">// 2</span>
    <span class="type">Theme</span>(																			<span class="comment">// 3</span>
      htmlFactory: <span class="type">OddThemeHTMLFactory</span>(),
      ressourcePaths: []
    )
  }
}
</code></pre><ol><li>Hier lege ich fest dass die Website die meine Theme nutzen will auch zu meinem <code>OddWebsite</code> Protokoll konform sein muss. Dazu später mehr.</li><li>Die statische Variable legt auch den Namen der Theme fest, wie man ihn in der Publish Pipeline später nutzt</li><li>Damit die Theme das HTML "bauen" kann braucht sie natürlich eine HTMLFactory. Interessanter hier sind die <code>ressourcePaths</code>, diese sind absichtlich leer bei mir, da der <code>.head()</code> component von Publish standardmäßig die <code>styles.css</code> im Root-Directory nutzt. Auch dazu später mehr.</li></ol><h3>Eigene HTMLFactory</h3><p>Wirklich viel zu sagen gibt es dazu für meine Seite nicht, da das HTML sehr ähnlich zu dem der 'Foundation' Theme bleibt. Dennoch möchte ich kurz ein paar Worte zu den Funktionen der Factory verlieren und auch kurz, in den Kommentaren, beschreiben was ich denn abgeändert habe.</p><pre><code><span class="keyword">private struct</span> OddThemeHTMLFactory&lt;Site: <span class="type">OddWebsite</span>&gt;: <span class="type">HTMLFactory</span> {
  <span class="comment">// Erzeugt das HTML für den Index der Seite
  // Nur kleine Änderungen, wie das entfernen eines Paragraphens und Headings</span>
  <span class="keyword">func</span> makeIndexHTML(for index: <span class="type">Index</span>, context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span> { <span class="comment">/*…*/</span> }
  
  <span class="comment">// Erzeugt das HTML für die einzelnen Sektionen, keine Änderungen</span>
  <span class="keyword">func</span> makeSectionHTML(for section: <span class="type">Section</span>&lt;<span class="type">Site</span>&gt;, context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span> { <span class="comment">/*…*/</span>}

  <span class="comment">// Erzeugt das HTML für den Inhalt des Blogs, sprich die .md Dateien 
  // Zeigt zusätzlich das Datum und die Zeit des Artikels an</span>
  <span class="keyword">func</span> makeItemHTML(for item: <span class="type">Item</span>&lt;<span class="type">Site</span>&gt;, context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span> { <span class="comment">/*…*/</span> }
  <span class="comment">// Erzeugt das HTML für die einzelnen Seite, wie z.B. die "Über mich" Seite
  // Noch keine Änderungen</span>
  <span class="keyword">func</span> makePageHTML(for page: <span class="type">Page</span>, context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span> { <span class="comment">/*…*/</span> }

  <span class="comment">// Erzeugt das HTML für die Tag Liste, eine Übersicht aller Tags
  // Noch keine Änderungen</span>
  <span class="keyword">func</span> makeTagListHTML(for page: <span class="type">TagListPage</span>, context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span>? { <span class="comment">/*…*/</span> }

  <span class="comment">// Erzeugt das HTML für die Tag Details, eine Übersicht aller Posts mit einem Tag
  // Noch keine Änderungen</span>
  <span class="keyword">func</span> makeTagDetailsHTML(for page: <span class="type">TagDetailsPage</span>, context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span>? { <span class="comment">/*…*/</span> }
}
</code></pre><p>Interessant hierbei ist, dass die letzten beiden Funktionen nicht unbedingt einen Rückgabewert haben müssen. Das ist dann nützlich wenn die Theme die man sich baut keine Tags unterstützen soll.</p><p>Neben diesen Methoden gibt es auch noch Helfer-Structs, <code>Wrapper</code> erzeugt einfach nur ein <code>Div</code> mit der Klasse 'wrapper', <code>SiteFooter</code> erzeugt den Footer, <code>ItemList</code> erzeugt eine Liste von allen Posts und <code>ItemTagList</code> eine Liste von allen Tags die ein Post hat.</p><p>Was ich für meine Theme noch angepasst habe ist der <code>SiteHeader</code>, <code>/*…*/</code> stehen für Code der unverändert blieb.</p><pre><code><span class="keyword">private struct</span> SiteHeader&lt;Site: <span class="type">OddWebsite</span>&gt;: <span class="type">Component</span> {
  <span class="keyword">var</span> context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;
  <span class="keyword">var</span> selectedSectionID: <span class="type">Site</span>.<span class="type">SectionID</span>?

  <span class="keyword">var</span> body: <span class="type">Component</span> {
    <span class="type">Header</span> {
      <span class="type">Wrapper</span> {
        <span class="type">H1</span>( <span class="comment">/*…*/</span> )
        
        <span class="comment">// Die Seitenbeschreibung ist nun im Header für meine Theme</span>
        <span class="type">Span</span>(context.<span class="property">site</span>.<span class="property">description</span>).<span class="call">class</span>(<span class="string">"description"</span>)

        <span class="keyword">if</span> <span class="type">Site</span>.<span class="type">SectionID</span>.<span class="property">allCases</span>.<span class="property">count</span> &gt; <span class="number">1</span> { <span class="comment">/*…*/</span> }

        <span class="comment">// Zusätzlich bietet meine Theme nun einen Bereich für "soziale" Links
        // z.B. Github, Twitter, LinkedIn, E-Mail und später vielleicht noch mehr</span>
        socials
      }
    }
  }

  <span class="keyword">var</span> navigation: <span class="type">Component</span> { <span class="comment">/*…*/</span> }
  
  <span class="keyword">var</span> socials: <span class="type">Component</span> {
    <span class="type">Navigation</span> {
      <span class="type">List</span>(context.<span class="property">site</span>.<span class="property">contacts</span>) { (contactPoint, handler) <span class="keyword">in</span>
				<span class="type">Link</span>(url: contactPoint.<span class="call">url</span>(handler)) {
          contactPoint.<span class="property">svg</span>
        }.<span class="call">class</span>(<span class="string">"contact-svg"</span>)
			}
      .<span class="call">class</span>(<span class="string">"share"</span>)
    }
  }
}
</code></pre><p>Neu bei der <code>socials</code> Komponente ist, dass sie die <code>contacts</code> variable meiner Seite nutzt, etwas was durch das <code>OddWebsite</code> Protokoll vorgegeben wird.</p><h3>Das eigene Protokoll</h3><p>Durch ein eigenes Protokoll kann man in der Theme dann auch mehr machen, z.B. auf ein Array von Kontaktdaten zugreifen.</p><pre><code><span class="keyword">public protocol</span> OddWebsite: <span class="type">Website</span> {
  <span class="keyword">var</span> contacts: [(<span class="type">ContactPoint</span>, <span class="type">String</span>)] { <span class="keyword">get</span> }
}

<span class="keyword">public enum</span> ContactPoint {
  <span class="keyword">case</span> twitter, github, linkedin, mail
  
  <span class="keyword">func</span> url(<span class="keyword">_</span> handler: <span class="type">String</span>) -&gt; <span class="type">String</span> {
    <span class="keyword">switch self</span> {
      <span class="keyword">case</span> .<span class="dotAccess">twitter</span>:
      	<span class="keyword">return</span> <span class="string">"https://twitter.com/</span>\(handler)<span class="string">"</span>
      <span class="keyword">case</span> .<span class="dotAccess">github</span>:
      	<span class="keyword">return</span> <span class="string">"https://github.com/</span>\(handler)<span class="string">"</span>
      <span class="keyword">case</span> .<span class="dotAccess">linkedin</span>:
      	<span class="keyword">return</span> <span class="string">"https://www.linkedin.com/in/</span>\(handler)<span class="string">/"</span>
      <span class="keyword">case</span> .<span class="dotAccess">mail</span>:
      	<span class="keyword">return</span> <span class="string">"mailto:</span>\(handler)<span class="string">"</span>
    }
  }
  
  <span class="keyword">var</span> svg: <span class="type">Node</span>&lt;<span class="type">HTML</span>.<span class="type">AnchorContext</span>&gt; {
    <span class="keyword">switch self</span> {
      <span class="keyword">case</span> .<span class="dotAccess">twitter</span>:
      	<span class="keyword">return</span> .<span class="call">element</span>(<span class="comment">/* SVG für das Twitter icon */</span>)
      <span class="keyword">case</span> .<span class="dotAccess">github</span>:
      	<span class="keyword">return</span> .<span class="call">element</span>(<span class="comment">/* SVG für das Github Icon */</span>)
      <span class="keyword">case</span> .<span class="dotAccess">linkedin</span>:
      	<span class="keyword">return</span> .<span class="call">element</span>(<span class="comment">/* SVG für das LinkedIn Icon */</span>)
      <span class="keyword">case</span> .<span class="dotAccess">mail</span>:
      	<span class="keyword">return</span> .<span class="call">element</span>(<span class="comment">/* SVG für das E-Mail Icon */</span>)
    }
  }
}
</code></pre><p>Langfristig will ich die Theme auch als Paket anbieten, dafür muss das Protokoll und auch die Kontaktmöglichkeiten natürlich noch viel erweitert werden. Ich freue mich natürlich über jegliche Hilfe beim Erreichen dieses Ziels.</p><p>Damit meine Theme funktioniert brauche ich nun nur noch meine Website Klasse konform dazu machen:</p><pre><code><span class="keyword">struct</span> OddmagnetDev: <span class="type">OddWebsite</span> {
  <span class="keyword">var</span> contacts: [(<span class="type">ContactPoint</span>, <span class="type">String</span>)] {
    [
      (.<span class="dotAccess">twitter</span>, <span class="string">"OddMagnetDev"</span>),
      (.<span class="dotAccess">github</span>, <span class="string">"OddMagnet"</span>),
      (.<span class="dotAccess">linkedin</span>, <span class="string">"OddMagnet"</span>),
      (.<span class="dotAccess">mail</span>, <span class="string">"mibruenen@gmail.com"</span>)
    ]
  }
  
  <span class="comment">/* Die restlichen Variablen die eine Publish-Seite braucht sind ausgelassen */</span>
}

<span class="comment">// In der Publish Pipeline muss dann nur noch die eigene Theme genutzt werden</span>
<span class="keyword">try</span> <span class="type">OddmagnetDev</span>().<span class="call">publish</span>(using: [
  <span class="comment">/* andere Schritte ausgelassen */</span>
  .<span class="call">generateHTML</span>(withTheme: .<span class="dotAccess">oddTheme</span>),
  <span class="comment">/* andere Schritte ausgelassen */</span>
])
</code></pre><p>Im letzten Teil der Reihe werde ich noch kurz über eine kleine Änderung bei den Plugins, sowie das erstellen vom CSS für die Seite gehen.</p></div><div class="content-info"><span>Zuletzt bearbeitet: 8. Feb 2022, 17:26</span><span>Markiert mit: <ul class="tag-list"><li class="tag blog"><a href="/tags/blog">Blog</a></li><li class="tag publish"><a href="/tags/publish">Publish</a></li><li class="tag swift"><a href="/tags/swift">Swift</a></li></ul></span></div></article></div><footer><p>In Swift mit <a href="https://github.com/johnsundell/publish">Publish</a> erstellt</p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>